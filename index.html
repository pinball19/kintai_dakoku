<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    let selectedName = null;

    // 名前を選択する関数
    function selectName(name) {
        selectedName = name;
        alert(`${name} さんが選ばれました`);
    }

    // 出勤・退勤ボタンの関数
    async function recordTime(type) {
        if (!selectedName) {
            alert("名前を選択してください");
            return;
        }

        const now = new Date();
        const timestamp = now.toISOString();

        try {
            await addDoc(collection(db, "attendance"), {
                name: selectedName,
                type: type,
                timestamp: timestamp
            });
            alert(`${selectedName} さんの ${type} を記録しました！（時刻: ${timestamp}）`);
        } catch (error) {
            console.error("データの書き込みに失敗しました: ", error);
            alert("データの書き込みに失敗しました。コンソールを確認してください。");
        }
    }
</script>
